#!/usr/bin/env ruby
require 'woorld'
require 'colorize'

class Player
  def initialize
    puts 'What is your name:'.yellow
    @name = gets.chomp
    puts
  end

  def name
    @name
  end

  def get_action
    puts 'What do you want to do?'.yellow
    action = gets.chomp
  end
end

class Game
  def initialize
    @game_over = false
    @player = Player.new
  end

  def title greeting
    puts '='.blue * greeting.length
    puts greeting.blue
    puts '='.blue * greeting.length
    puts
  end

  def start
    title "Welcome to the adventure #{@player.name.yellow}..."

    while not @game_over do
      # wait for player action
      action = @player.get_action

      # process action
      case action
      # debugging
      when 'win'
        @game_over = true
        puts
        puts 'Congratulations! You win!'.green
        puts
      when /help|\?/
        puts
        puts 'Here are the things you can do:'.cyan
        puts '  look - describe surroundings'.cyan
        puts '  help or ? - print this message'.cyan
        puts
      else
        puts "#{action} is an invalid action".red
        puts 'run help or ? for a list of available actions'.light_red
        puts
      end

      # process reaction
    end
  end
end

game = Game.new
game.start
